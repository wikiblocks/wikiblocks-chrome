"undefined"==typeof Map?(Map=function(){this.clear()},Map.prototype={set:function(t,e){return this._[t]=e,this},get:function(t){return this._[t]},has:function(t){return t in this._},"delete":function(t){return t in this._&&delete this._[t]},clear:function(){this._=Object.create(null)},get size(){var t=0;for(var e in this._)++t;return t},forEach:function(t){for(var e in this._)t(this._[e],e,this)}}):function(){var t=new Map;t.set(0,0)!==t&&(t=t.set,Map.prototype.set=function(){return t.apply(this,arguments),this})}(),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.d3=e()}(this,function(){"use strict";function t(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function e(t,e){function r(){return n(this,t,e)}function i(){return n(this,t,e.apply(this,arguments))}return this.each("function"==typeof e?i:r)}function n(e,n,r){var i=t(e),o=i.CustomEvent;o?o=new o(n,r):(o=i.document.createEvent("Event"),r?(o.initEvent(n,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(n,!1,!1)),e.dispatchEvent(o)}function r(t){return t.replace(nt,"\\$&")}function i(t,e,n){function i(){for(var r=p,i=arguments.length>>1,u=new Array(i);--i>=0;)r=r[arguments[(i<<1)+1]],u[i]=i?r._parent:r;var c=o(e,u,arguments);h&&(c=a(c)),s.call(this),this.addEventListener(t,this[l]=c,c._capture=n),c._listener=e}function s(){var e=this[l];e&&(this.removeEventListener(t,e,e._capture),delete this[l])}function c(){var e,n=new RegExp("^__on([^.]+)"+r(t)+"$");for(var i in this)if(e=i.match(n)){var o=this[i];this.removeEventListener(e[1],o,o._capture),delete this[i]}}var h,f=arguments.length,l="__on"+t,p=this._root;return 2>f?(f=this.node()[l])&&f._listener:(3>f&&(n=!1),(f=t.indexOf("."))>0&&(t=t.slice(0,f)),(h=rt.has(t))&&(t=rt.get(t)),this.each(e?f?i:u:f?s:c))}function o(t,e,n){return function(r){for(var i=e.length,o=it;--i>=0;)n[i<<1]=e[i].__data__;it=r;try{t.apply(e[0],n)}finally{it=o}}}function a(t){return function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t(e)}}function u(){}function s(t){return arguments.length?this.property("__data__",t):this.node().__data__}function c(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})}function h(t){return function(){return this.querySelector(t)}}function f(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.slice(0,e),t=t.slice(e+1)),at.has(n)?{space:at.get(n),local:t}:t}function l(t,e){function n(){return this.appendChild(t.apply(this,arguments))}function r(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)}return"function"!=typeof t&&(t=p(t)),this.select(arguments.length<2?n:("function"!=typeof e&&(e=h(e)),r))}function p(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return t=f(t),t.local?n:e}function _(t){function e(){this.innerHTML=t}function n(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}return arguments.length?(null==t&&(t=""),this.each("function"==typeof t?n:e)):this.node().innerHTML}function d(t){function e(){this.textContent=t}function n(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}return arguments.length?(null==t&&(t=""),this.each("function"==typeof t?n:e)):this.node().textContent}function g(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=(t+"").trim().split(/^|\s+/);var i=t.length;if(arguments.length<2){var o=this.node(),a=-1;if(e=o.classList){for(;++a<i;)if(!e.contains(t[a]))return!1}else for(e=o.getAttribute("class");++a<i;)if(!y(t[a]).test(e))return!1;return!0}return t=t.map(m),this.each("function"==typeof e?r:n)}function m(t){var e;return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);e||(e=y(t));var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",v(i+" "+t))):n.setAttribute("class",v(i.replace(e," ")))}}function v(t){return t.trim().replace(/\s+/g," ")}function y(t){return new RegExp("(?:^|\\s+)"+r(t)+"(?:\\s+|$)","g")}function w(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return arguments.length<2?this.node()[t]:this.each(null==e?n:"function"==typeof e?i:r)}function A(e,n,r){function i(){this.style.removeProperty(e)}function o(){this.style.setProperty(e,n,r)}function a(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}var u=arguments.length;return 2>u?t(u=this.node()).getComputedStyle(u,null).getPropertyValue(e):(3>u&&(r=""),this.each(null==n?i:"function"==typeof n?a:o))}function x(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function u(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}if(t=f(t),arguments.length<2){var s=this.node();return t.local?s.getAttributeNS(t.space,t.local):s.getAttribute(t)}return this.each(null==e?t.local?r:n:"function"==typeof e?t.local?u:a:t.local?o:i)}function b(t){function e(n,i){var o,a=-1,u=n.length;if(--i)for(var s=2*i,c=s+1;++a<u;)(o=n[a])&&(r[s]=o._parent.__data__,r[c]=a,e(o,i));else for(;++a<u;)(o=n[a])&&(r[0]=o.__data__,r[1]=a,t.apply(o,r))}var n=this._depth,r=new Array(n);return e(this._root,n),this}function S(){return!this.node()}function E(){var t=0;return this.each(function(){++t}),t}function M(){return C(this._root,this._depth)}function C(t,e){var n,r=-1,i=t.length;if(--e){for(;++r<i;)if((n=t[r])&&(n=C(n,e)))return n}else for(;++r<i;)if(n=t[r])return n}function N(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function T(){var t=arguments[0];return t.apply(arguments[0]=this,arguments),this}function L(t){return t._root=P(t._root,t._depth)}function P(t,e){var n,r=-1,i=t.length;if(--e)for(;++r<i;)(n=t[r])&&(t[r]=P(n,e));else if(!Array.isArray(t)){for(var o=new Array(i);++r<i;)o[r]=t[r];o._parent=t._parent,t=o}return t}function D(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}function n(t,r){if(--r)for(var i,o=-1,a=t.length;++o<a;)(i=t[o])&&n(i,r);else t.sort(e)}return t||(t=V),n(L(this),this._depth),this.order()}function V(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function j(){return B(this._root,this._depth),this}function B(t,e){var n,r,i=t.length;if(--e)for(;--i>=0;)(n=t[i])&&B(n,e);else for(r=t[--i];--i>=0;)(n=t[i])&&(r&&r!==n.nextSibling&&r.parentNode.insertBefore(n,r),r=n)}function R(t){return new U(q(L(t),t._depth),t._depth)}function q(t,e){var n,r=-1,i=t.length,o=new Array(i);if(--e)for(;++r<i;)(n=t[r])&&(o[r]=q(n,e));return o._parent=t._parent,o}function O(){return this._exit||(this._exit=R(this))}function X(){return this._enter||(this._enter=R(this),this._enter._update=this),this._enter}function z(t,e){function n(e,r,i,o){var a,u,h=-1;if(o--){var f=2*o,l=f+1;for(a=e.length;++h<a;)(u=e[h])&&(s[f]=u._parent.__data__,s[l]=h,n(u,r[h],i[h],o))}else{var p,_=0;for(c(e,r,i,t.apply(e._parent,s)),a=e.length;++h<a;)if(p=r[h]){for(h>=_&&(_=h+1);!(u=e[_])&&++_<a;);p._next=u||null}}}function r(t,e,n,r){var i,o=0,a=t.length,u=r.length,s=Math.min(a,u);for(e.length=0,e.length=u,n.length=0,n.length=a;s>o;++o)(i=t[o])?i.__data__=r[o]:e[o]=new I(t._parent,r[o]);for(;u>o;++o)e[o]=new I(t._parent,r[o]);for(;a>o;++o)(i=t[o])&&(n[o]=t[o]);t.length=u}function i(t,n,r,i){var o,a,u,c=i.length,h=t.length,f=new Map,l=new Array(2).concat(s),p=new Array(h);for(n.length=0,n.length=c,r.length=0,r.length=h,o=0;h>o;++o)(a=t[o])&&(l[0]=a.__data__,l[1]=o,p[o]=u=e.apply(a,l),f.has(u)?r[o]=a:f.set(u,a));for(t.length=0,t.length=c,o=0;c>o;++o)l[0]=i[o],l[1]=o,u=e.apply(t._parent,l),(a=f.get(u))?a!==!0&&(t[o]=a,a.__data__=i[o]):n[o]=new I(t._parent,i[o]),f.set(u,!0);for(o=0;h>o;++o)(a=f.get(p[o]))!==!0&&(r[o]=a)}if(!t){var o=new Array(this.size()),a=-1;return this.each(function(t){o[++a]=t}),o}var u=this._depth-1,s=new Array(2*u),c=e?i:r;return"function"!=typeof t&&(t=Y(t)),n(this._root,this.enter()._root,this.exit()._root,u),this}function I(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Y(t){return function(){return t}}function $(t){function e(n,i){var o,a,u=-1,s=n.length;if(--i){var c=2*i,h=c+1;for(a=new Array(s);++u<s;)(o=n[u])&&(r[c]=o._parent.__data__,r[h]=u,a[u]=e(o,i))}else for(a=[];++u<s;)(o=n[u])&&(r[0]=o.__data__,r[1]=u,t.apply(o,r)&&a.push(o));return a._parent=n._parent,a}var n=this._depth,r=new Array(2*n);return"function"!=typeof t&&(t=ut(t)),new U(e(this._root,n),n)}function k(t){function e(n,i){var o,a,u=-1,s=n.length,c=new Array(s);if(--i)for(var h=2*i,f=h+1;++u<s;)(o=n[u])&&(r[h]=o._parent.__data__,r[f]=u,c[u]=e(o,i));else for(;++u<s;)(o=n[u])&&(r[0]=o.__data__,r[1]=u,c[u]=a=t.apply(o,r),a._parent=o);return c._parent=n._parent,c}var n=this._depth,r=new Array(2*n);return"function"!=typeof t&&(t=G(t)),new U(e(this._root,n),n+1)}function G(t){return function(){return this.querySelectorAll(t)}}function H(t){function e(n,i,o){var a,u,s=-1,c=n.length,h=new Array(c);if(--o)for(var f=2*o,l=f+1;++s<c;)(a=n[s])&&(r[f]=a._parent.__data__,r[l]=s,h[s]=e(a,i&&i[s],o));else for(;++s<c;)(a=n[s])&&(r[0]=a.__data__,r[1]=s,(u=t.apply(a,r))&&("__data__"in a&&(u.__data__=a.__data__),i&&(i[s]=u,delete n[s]),h[s]=u));return h._parent=n._parent,h}var n=this._depth,r=new Array(2*n);return"function"!=typeof t&&(t=h(t)),new U(e(this._root,this._update&&this._update._root,n),n)}function U(t,e){this._root=t,this._depth=e,this._enter=this._update=this._exit=null}function K(){return new U([document.documentElement],1)}function W(t){return new U(["string"==typeof t?document.querySelector(t):t],1)}function F(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>ht){var i=defaultView(t);if(i.scrollX||i.scrollY){n=W(i.document.body).append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=n.node().getScreenCTM();ht=!(o.f||o.e),n.remove()}}return ht?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function J(){for(var t,e=it;t=e.sourceEvent;)e=t;return e}function Q(t,e){arguments.length<2&&(e=J().touches);for(var n=0,r=e?e.length:0,i=new Array(r);r>n;++n)i[n]=F(t,e[n]);return i}function Z(t,e,n){arguments.length<3&&(n=e,e=J().changedTouches);for(var r,i=0,o=e?e.length:0;o>i;++i)if((r=e[i]).identifier===n)return F(t,r);return null}function tt(t){return new U("string"==typeof t?document.querySelectorAll(t):t,1)}function et(t,e){return arguments.length<2&&(e=J()),e.changedTouches&&(e=e.changedTouches[0]),F(t,e)}var nt=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,rt=new Map,it=null;if("undefined"!=typeof document){var ot=document.documentElement;"onmouseenter"in ot||rt.set("mouseenter","mouseover").set("mouseleave","mouseout")}var at=(new Map).set("svg","http://www.w3.org/2000/svg").set("xhtml","http://www.w3.org/1999/xhtml").set("xlink","http://www.w3.org/1999/xlink").set("xml","http://www.w3.org/XML/1998/namespace").set("xmlns","http://www.w3.org/2000/xmlns/");I.prototype={appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e||this._next)}};var ut=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var st=document.documentElement;if(!st.matches){var ct=st.webkitMatchesSelector||st.msMatchesSelector||st.mozMatchesSelector||st.oMatchesSelector;ut=function(t){return function(){return ct.call(this,t)}}}}U.prototype=K.prototype={select:H,selectAll:k,filter:$,data:z,enter:X,exit:O,order:j,sort:D,call:T,nodes:N,node:M,size:E,empty:S,each:b,attr:x,style:A,property:w,"class":g,classed:g,text:d,html:_,append:l,insert:l,remove:c,datum:s,event:i,on:i,dispatch:e};var ht="undefined"!=typeof navigator&&/WebKit/.test(navigator.userAgent)?-1:0,ft={get event(){return it},mouse:et,namespace:f,namespaces:at,requote:r,select:W,selectAll:tt,selection:K,touch:Z,touches:Q};return ft});